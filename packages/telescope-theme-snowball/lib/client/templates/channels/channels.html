<template name="channels">
    {{#if currentUser}}
    <div class="logoZoneLeft">
        <a href="{{pathFor 'AddChannels'}}" class="addChannel"><i class="icon icon-plus-circle"></i></a>
    </div>
    <div class="logoZoneRight">
        <!-- Adding the Post a new idea Button next to the search button (ML) -->
        <table>
            <tr>
                <td>
                    <a href="#" class="showChannelSearch"><i class="icon icon-magnifier"></i></a>
                </td>
                <td>
                  {{> submit_button}}
                </td>
            </tr>
        </table>
    </div>
    <div class="channels-view">
        <div class="channels-header clearfix">
            <a href="{{pathFor 'AddChannels'}}" class="btn btn-secondary addChannel desktop-only pull-left">
                <i class="icon icon-plus-circle"></i>
                &nbsp;&nbsp;Create Group
            </a>
            <div class="search {{searchQueryEmpty}} {{moduleClass}} pull-right">
                <input id="search_channels" type="search" class="search-field" placeholder="{{_ 'search'}} channels"
                       value="{{searchQuery}}">
            </div>
        </div>
      {{#HammerTouchArea gestureMap=touchEvents}}
          <ul class="channels-list">
            {{#each channels}}
                <li class="channel-list-item {{GetClassForIsSubscribedTo _id}} clearfix">
                    <div class="left-side">
                        <h2 class="name"><a href="{{categoryLink}}">{{name}}</a></h2>
                        <p class="description"> {{description}} </p>
                    </div>

                    <div class="right-side">
                        <button class="subscribe-button" channel-id="{{_id}}">
                          {{#if isPrivate}}
                              <i class="icon icon-lock"></i>&nbsp;
                          {{/if}}
                          {{#if IsSubscribedTo _id}}
                              Joined
                          {{else}}
                              Join
                          {{/if}}
                        </button>
                    </div>
                </li>
            {{/each}}
          </ul>
      {{/HammerTouchArea}}
    </div>
      {{else}}
        <div class="grid-small grid-block dialog no-rights center-text">You are not logged in.</div>
      {{/if}}
</template>
